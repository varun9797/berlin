<div class="conversations-container">
    <div class="conversations-header">
        <h3 class="header-title">
            <span class="chat-icon">ðŸ’¬</span>
            Conversations
        </h3>
        <button class="create-group-btn" (click)="onCreateGroupClick()" aria-label="Create group">
            <svg viewBox="0 0 24 24" width="18" height="18">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
            </svg>
        </button>
    </div>

    <div class="conversations-list">
        <div class="empty-state" *ngIf="conversations.length === 0">
            <div class="empty-icon">ðŸ“­</div>
            <p class="empty-message">No conversations yet</p>
            <p class="empty-subtitle">Start a chat or create a group</p>
        </div>

        <div class="conversation-item" *ngFor="let conversation of conversations; trackBy: trackByConversationId"
            (click)="onConversationClick(conversation)">

            <div class="conversation-avatar">
                <div class="avatar-container" [class.group-avatar]="conversation.type === 'group'">
                    {{ getInitials(getConversationName(conversation)) }}
                    <div class="online-indicator"
                        *ngIf="isConversationOnline(conversation) && conversation.type === 'one-to-one'"></div>
                    <div class="group-indicator" *ngIf="conversation.type === 'group'">
                        <svg viewBox="0 0 24 24" width="12" height="12">
                            <path
                                d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zM4 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm5 7c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2z" />
                        </svg>
                    </div>
                </div>
            </div>

            <div class="conversation-info">
                <div class="conversation-header-row">
                    <div class="conversation-name">{{ getConversationName(conversation) }}</div>
                    <div class="conversation-time" *ngIf="conversation.lastMessage">
                        {{ getLastMessageTime(conversation) }}
                    </div>
                </div>

                <div class="conversation-details">
                    <div class="last-message" *ngIf="conversation.lastMessage">
                        <span class="message-preview">{{ conversation.lastMessage.content }}</span>
                    </div>
                    <div class="no-message" *ngIf="!conversation.lastMessage">
                        <span class="no-message-text">No messages yet</span>
                    </div>

                    <div class="conversation-badges">
                        <div class="unread-badge" *ngIf="conversation.unreadCount && conversation.unreadCount > 0">
                            {{ conversation.unreadCount > 99 ? '99+' : conversation.unreadCount }}
                        </div>
                        <div class="group-badge" *ngIf="conversation.type === 'group'">
                            {{ conversation.participants.length }} members
                        </div>
                    </div>
                </div>
            </div>

            <div class="conversation-chevron">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z" />
                </svg>
            </div>
        </div>
    </div>
</div>